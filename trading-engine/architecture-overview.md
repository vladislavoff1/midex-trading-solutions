---
description: Каких цифр добились. Какие технологии используем.
---

# Обзор архитектуры

## Каких цифр добились

**Скорость обработки транзакций — 5 млн/сек**. Транзакция — это постановка или отмена ордера, регистрация или пополнение биржевого счета. 

**99.9% запросов исполняются быстрее, чем за 100 мкс.**

**Пропускная способность** **FIX Gateway — 300 тыс/сек**. Если пропускной способности будет не хватать, можно будет поставить еще один FIX Gateway на другом сервере.

{% hint style="success" %}
За два года работы биржа Midex обработала 16.6 миллионов ордеров. Новый Trading Engine переиграл всю историю биржи Midex за 3 секунды. 
{% endhint %}

{% hint style="info" %}
На бирже **Coinbase** на паре ETH/BTC происходило около **30 сделок в минуту** в момент написания статьи. **Trading Engine** обрабатывает **5 миллионов** событий **в секунду**.
{% endhint %}

## Какие технологии используем

### Kotlin, Java

Trading Engine написан на Kotlin. Часть кода, связанного с кодированием сообщений генерируется в Java. 

### Event Sourcing

Храним все действия пользователей, а не конечное состояние.

### No Data Base

Мы отказались от баз данных и записываем все события в файлы на диск. Так быстрее и надежнее.

### Aeron 

Библиотека для общения между процессами и серверами.

### CQRS

Чтение данных из локального кеша для каждого шлюза. В ядро попадают только запросы, меняющие данные. 



## Бизнес логика

### **Легко добавлять функции**

Ядро биржи работает однопоточно, это позволяет писать "простой код" и отказаться от overhead’а многопоточных алгоритмов и переключения контекста. 

stop и stop limit реализовали за 2 недели

### **Легко тестируется**

из-за event sourcing

## **Тесты могут писать бизнес аналитики**

Пример теста в таблице



